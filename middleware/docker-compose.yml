version: '3.8'

services:
  middleware:
    build: .
    container_name: lilygo-middleware
    ports:
      - "5000:5000"
    volumes:
      # Mount config directory for persistent configuration
      - ./config:/app/config
    environment:
      # Optional: Configure via environment variables instead of config file
      # Uncomment and set values as needed
      # - OPENWEATHERMAP_API_KEY=your_key_here
      # - WEATHER_CITY=Sydney
      # - WEATHER_COUNTRY=AU
      # - WEATHER_UNITS=metric
      # - COINGECKO_API_KEY=your_key_here
      # - CRYPTO_SYMBOL=btc
      # - MARKETSTACK_API_KEY=your_key_here
      # - STOCK_SYMBOL=AAPL
      # - TRANSPORTNSW_API_KEY=your_key_here
      # - TRAIN_ORIGIN=10101100
      # - TRAIN_DESTINATION=10101331
      - PORT=5000
      - HOST=0.0.0.0
      - DEBUG=false
    restart: unless-stopped
    networks:
      - lilygo-network

networks:
  lilygo-network:
    driver: bridge
